name: Snazzy LookML Linter
author:
description: Lint LookML Projects and create Pull Request reviews with linting violations.

inputs:
  configFile:
    description: 'Path to linter config file specifying severity of each rule.'
    required: false
    default: ${{ github.workspace }}/.github/config.yaml
  filepaths:
    description: 'List of files to lint. Ignore if wanting to lint ALL project files. Use output from tj-actions/changed-files action in workflow to lint only files changed in commit/pull request.'
    required: false
    default: null
  saveOutputToFile:
    description: 'Flag to determine whether or not linter output should be saved to a .txt file within repo.'
    required: false
    default: false
    type: boolean

outputs:
  error_log:
    description: 'Error/warning output generated by the linter (indented by LookML file names).'
    value: ${{ steps.lookml-linter.outputs.error_log }}

runs:
  using: docker
  image: Dockerfile
  args:
    - ${{ inputs.configFile }}
